{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\trello-clone-mern\\\\client\\\\src\\\\Components\\\\Modals\\\\EditCardModal\\\\Popovers\\\\Date\\\\DatePopover.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Container, DateRangeWrapper, Wrapper, Row, DateInput, DateTitle, SaveButton } from './styled';\nimport { DateRange } from 'react-date-range';\nimport CheckBox from '../../ReUsableComponents/Checkbox';\nimport Button from '../../ReUsableComponents/Button';\nimport moment from 'moment';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { openAlert } from '../../../../../Redux/Slices/alertSlice';\nimport { startDueDatesUpdate } from '../../../../../Services/cardService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DatePopover = props => {\n  _s();\n\n  const dispatch = useDispatch();\n  const card = useSelector(state => state.card);\n  const [state, setState] = useState([{\n    startDate: card.date.startDate !== null ? moment(card.date.startDate).toDate() : card.date.dueDate !== null ? moment(card.date.dueDate).toDate() : new Date(),\n    endDate: card.date.dueDate !== null ? moment(card.date.dueDate).toDate() : card.date.startDate !== null ? moment(card.date.startDate).toDate() : new Date(),\n    key: 'selection'\n  }]);\n  const [enableStartDate, setEnableStartDate] = useState(card.date.startDate != null ? card.date.startDate : false);\n  const [enableDueDate, setEnableDueDate] = useState(card.date.dueDate != null ? card.date.dueDate : false);\n  const [focusStart, setFocusStart] = useState(false);\n  const [focusDue, setFocusDue] = useState(false);\n  const [time, setTime] = useState(card.date.dueDate ? card.date.dueTime : moment(new Date()).format('HH:mm'));\n  const [startDate, setStartDate] = useState(card.date.startDate != null ? card.date.startDate : moment(state[0].startDate).format('YYYY-MM-DD'));\n  const [dueDate, setDueDate] = useState(card.date.dueDate != null ? card.date.dueDate : moment(state[0].endDate).format('YYYY-MM-DD'));\n  useEffect(() => {\n    setStartDate(moment(state[0].startDate).format('YYYY-MM-DD'));\n    setDueDate(moment(state[0].endDate).format('YYYY-MM-DD'));\n  }, [state]);\n\n  const handleBlur = () => {\n    const date1 = moment(startDate).toDate();\n    const date2 = moment(dueDate).toDate();\n\n    if (date1 > date2) {\n      dispatch(openAlert({\n        message: 'Due date cannot be smaller then start date!',\n        severity: 'error'\n      }));\n      setStartDate(moment(state[0].startDate).format('YYYY-MM-DD'));\n      setDueDate(moment(state[0].endDate).format('YYYY-MM-DD'));\n      return;\n    }\n\n    setState([{\n      startDate: date1,\n      endDate: date2,\n      key: 'selection'\n    }]);\n  };\n\n  const handleSaveClick = async () => {\n    props.closeCallback();\n    await startDueDatesUpdate(card.cardId, card.listId, card.boardId, enableStartDate ? startDate : null, enableDueDate ? dueDate : null, enableDueDate ? time : null, dispatch);\n  };\n\n  const handleRemoveClick = async () => {\n    props.closeCallback();\n    await startDueDatesUpdate(card.cardId, card.listId, card.boardId, null, null, null, dispatch);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(DateRangeWrapper, {\n      children: /*#__PURE__*/_jsxDEV(DateRange, {\n        editableDateInputs: false,\n        onChange: item => {\n          enableStartDate && enableDueDate ? setState([item.selection]) : state[0].startDate !== item.selection.startDate ? setState([{\n            startDate: item.selection.startDate,\n            endDate: item.selection.startDate,\n            key: 'selection'\n          }]) : setState([{\n            startDate: item.selection.endDate,\n            endDate: item.selection.endDate,\n            key: 'selection'\n          }]);\n        },\n        format: 'DD/MM/yyyy',\n        showPreview: enableStartDate && enableDueDate ? true : false,\n        moveRangeOnFirstSelection: false,\n        ranges: state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [/*#__PURE__*/_jsxDEV(DateTitle, {\n        focus: focusStart,\n        children: \"Start Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(CheckBox, {\n          checked: enableStartDate,\n          clickCallback: () => setEnableStartDate(prev => {\n            setFocusStart(!prev);\n            if (enableDueDate) setFocusDue(prev);\n\n            if (prev) {\n              setState([{\n                startDate: moment(dueDate).toDate(),\n                endDate: moment(dueDate).toDate(),\n                key: 'selection'\n              }]);\n            }\n\n            return !prev;\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(DateInput, {\n          onClick: () => {\n            setFocusStart(true);\n            setFocusDue(false);\n          },\n          focus: focusStart,\n          readOnly: !enableStartDate,\n          value: enableStartDate ? startDate : '',\n          onChange: e => {\n            setStartDate(e.target.value);\n          },\n          onBlur: handleBlur,\n          onFocus: () => {\n            setFocusStart(true);\n            setFocusDue(false);\n          },\n          type: enableStartDate ? 'date' : 'text',\n          placeholder: \"dd.mm.yyyy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DateTitle, {\n        focus: focusDue,\n        children: \"Due Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(CheckBox, {\n          checked: enableDueDate,\n          clickCallback: () => setEnableDueDate(prev => {\n            setFocusDue(!prev);\n            if (enableStartDate) setFocusStart(prev);\n\n            if (prev) {\n              setState([{\n                startDate: moment(startDate).toDate(),\n                endDate: moment(startDate).toDate(),\n                key: 'selection'\n              }]);\n            }\n\n            return !prev;\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(DateInput, {\n          onClick: () => {\n            setFocusStart(false);\n            setFocusDue(true);\n          },\n          focus: focusDue,\n          readOnly: !enableDueDate,\n          value: enableDueDate ? dueDate : '',\n          onChange: e => {\n            setDueDate(e.target.value);\n          },\n          onBlur: handleBlur,\n          onFocus: () => {\n            setFocusStart(false);\n            setFocusDue(true);\n          },\n          type: enableDueDate ? 'date' : 'text',\n          placeholder: \"dd.mm.yyyy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(DateInput, {\n          onClick: () => {\n            setFocusStart(false);\n            setFocusDue(true);\n          },\n          focus: focusDue,\n          onFocus: () => {\n            setFocusStart(false);\n            setFocusDue(true);\n          },\n          readOnly: !enableDueDate,\n          style: {\n            width: '23.5%'\n          },\n          value: enableDueDate ? time : '',\n          onChange: e => setTime(e.target.value),\n          type: enableDueDate ? 'time' : 'text',\n          placeholder: \"hh:mm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(SaveButton, {\n        onClick: handleSaveClick,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        clickCallback: handleRemoveClick,\n        title: \"Remove\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 3\n  }, this);\n};\n\n_s(DatePopover, \"dnWR9ch2Sgp4QdUMa8KGW33+Yk0=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = DatePopover;\nexport default DatePopover;\n\nvar _c;\n\n$RefreshReg$(_c, \"DatePopover\");","map":{"version":3,"sources":["C:/Users/Dell/trello-clone-mern/client/src/Components/Modals/EditCardModal/Popovers/Date/DatePopover.js"],"names":["React","useEffect","useState","Container","DateRangeWrapper","Wrapper","Row","DateInput","DateTitle","SaveButton","DateRange","CheckBox","Button","moment","useDispatch","useSelector","openAlert","startDueDatesUpdate","DatePopover","props","dispatch","card","state","setState","startDate","date","toDate","dueDate","Date","endDate","key","enableStartDate","setEnableStartDate","enableDueDate","setEnableDueDate","focusStart","setFocusStart","focusDue","setFocusDue","time","setTime","dueTime","format","setStartDate","setDueDate","handleBlur","date1","date2","message","severity","handleSaveClick","closeCallback","cardId","listId","boardId","handleRemoveClick","item","selection","prev","e","target","value","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Container, DateRangeWrapper, Wrapper, Row, DateInput, DateTitle, SaveButton } from './styled';\r\nimport { DateRange } from 'react-date-range';\r\nimport CheckBox from '../../ReUsableComponents/Checkbox';\r\nimport Button from '../../ReUsableComponents/Button';\r\nimport moment from 'moment';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { openAlert } from '../../../../../Redux/Slices/alertSlice';\r\nimport { startDueDatesUpdate } from '../../../../../Services/cardService';\r\n\r\nconst DatePopover = (props) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst card = useSelector((state) => state.card);\r\n\tconst [state, setState] = useState([\r\n\t\t{\r\n\t\t\tstartDate:\r\n\t\t\t\tcard.date.startDate !== null\r\n\t\t\t\t\t? moment(card.date.startDate).toDate()\r\n\t\t\t\t\t: card.date.dueDate !== null\r\n\t\t\t\t\t? moment(card.date.dueDate).toDate()\r\n\t\t\t\t\t: new Date(),\r\n\t\t\tendDate:\r\n\t\t\t\tcard.date.dueDate !== null\r\n\t\t\t\t\t? moment(card.date.dueDate).toDate()\r\n\t\t\t\t\t: card.date.startDate !== null\r\n\t\t\t\t\t? moment(card.date.startDate).toDate()\r\n\t\t\t\t\t: new Date(),\r\n\t\t\tkey: 'selection',\r\n\t\t},\r\n\t]);\r\n\tconst [enableStartDate, setEnableStartDate] = useState(card.date.startDate != null ? card.date.startDate : false);\r\n\tconst [enableDueDate, setEnableDueDate] = useState(card.date.dueDate != null ? card.date.dueDate : false);\r\n\tconst [focusStart, setFocusStart] = useState(false);\r\n\tconst [focusDue, setFocusDue] = useState(false);\r\n\tconst [time, setTime] = useState(\r\n\t\tcard.date.dueDate? card.date.dueTime : moment(new Date()).format('HH:mm')\r\n\t);\r\n\tconst [startDate, setStartDate] = useState(\r\n\t\tcard.date.startDate != null ? card.date.startDate : moment(state[0].startDate).format('YYYY-MM-DD')\r\n\t);\r\n\tconst [dueDate, setDueDate] = useState(\r\n\t\tcard.date.dueDate != null ? card.date.dueDate : moment(state[0].endDate).format('YYYY-MM-DD')\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetStartDate(moment(state[0].startDate).format('YYYY-MM-DD'));\r\n\t\tsetDueDate(moment(state[0].endDate).format('YYYY-MM-DD'));\r\n\t}, [state]);\r\n\r\n\tconst handleBlur = () => {\r\n\t\tconst date1 = moment(startDate).toDate();\r\n\t\tconst date2 = moment(dueDate).toDate();\r\n\t\tif (date1 > date2) {\r\n\t\t\tdispatch(\r\n\t\t\t\topenAlert({\r\n\t\t\t\t\tmessage: 'Due date cannot be smaller then start date!',\r\n\t\t\t\t\tseverity: 'error',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tsetStartDate(moment(state[0].startDate).format('YYYY-MM-DD'));\r\n\t\t\tsetDueDate(moment(state[0].endDate).format('YYYY-MM-DD'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetState([\r\n\t\t\t{\r\n\t\t\t\tstartDate: date1,\r\n\t\t\t\tendDate: date2,\r\n\t\t\t\tkey: 'selection',\r\n\t\t\t},\r\n\t\t]);\r\n\t};\r\n\r\n\tconst handleSaveClick = async () => {\r\n\t\tprops.closeCallback();\r\n\t\tawait startDueDatesUpdate(\r\n\t\t\tcard.cardId,\r\n\t\t\tcard.listId,\r\n\t\t\tcard.boardId,\r\n\t\t\tenableStartDate ? startDate : null,\r\n\t\t\tenableDueDate ? dueDate : null,\r\n\t\t\tenableDueDate ? time : null,\r\n\t\t\tdispatch\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleRemoveClick = async () => {\r\n\t\tprops.closeCallback();\r\n\t\tawait startDueDatesUpdate(card.cardId, card.listId, card.boardId, null, null, null, dispatch);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<DateRangeWrapper>\r\n\t\t\t\t<DateRange\r\n\t\t\t\t\teditableDateInputs={false}\r\n\t\t\t\t\tonChange={(item) => {\r\n\t\t\t\t\t\tenableStartDate && enableDueDate\r\n\t\t\t\t\t\t\t? setState([item.selection])\r\n\t\t\t\t\t\t\t: state[0].startDate !== item.selection.startDate\r\n\t\t\t\t\t\t\t? setState([\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tstartDate: item.selection.startDate,\r\n\t\t\t\t\t\t\t\t\t\tendDate: item.selection.startDate,\r\n\t\t\t\t\t\t\t\t\t\tkey: 'selection',\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t  ])\r\n\t\t\t\t\t\t\t: setState([\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tstartDate: item.selection.endDate,\r\n\t\t\t\t\t\t\t\t\t\tendDate: item.selection.endDate,\r\n\t\t\t\t\t\t\t\t\t\tkey: 'selection',\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t  ]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tformat={'DD/MM/yyyy'}\r\n\t\t\t\t\tshowPreview={enableStartDate && enableDueDate ? true : false}\r\n\t\t\t\t\tmoveRangeOnFirstSelection={false}\r\n\t\t\t\t\tranges={state}\r\n\t\t\t\t/>\r\n\t\t\t</DateRangeWrapper>\r\n\t\t\t<Wrapper>\r\n\t\t\t\t<DateTitle focus={focusStart}>Start Date</DateTitle>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<CheckBox\r\n\t\t\t\t\t\tchecked={enableStartDate}\r\n\t\t\t\t\t\tclickCallback={() =>\r\n\t\t\t\t\t\t\tsetEnableStartDate((prev) => {\r\n\t\t\t\t\t\t\t\tsetFocusStart(!prev);\r\n\t\t\t\t\t\t\t\tif (enableDueDate) setFocusDue(prev);\r\n\t\t\t\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\t\t\t\tsetState([\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tstartDate: moment(dueDate).toDate(),\r\n\t\t\t\t\t\t\t\t\t\t\tendDate: moment(dueDate).toDate(),\r\n\t\t\t\t\t\t\t\t\t\t\tkey: 'selection',\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn !prev;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DateInput\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetFocusStart(true);\r\n\t\t\t\t\t\t\tsetFocusDue(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tfocus={focusStart}\r\n\t\t\t\t\t\treadOnly={!enableStartDate}\r\n\t\t\t\t\t\tvalue={enableStartDate ? startDate : ''}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetStartDate(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\tsetFocusStart(true);\r\n\t\t\t\t\t\t\tsetFocusDue(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype={enableStartDate ? 'date' : 'text'}\r\n\t\t\t\t\t\tplaceholder='dd.mm.yyyy'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<DateTitle focus={focusDue}>Due Date</DateTitle>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<CheckBox\r\n\t\t\t\t\t\tchecked={enableDueDate}\r\n\t\t\t\t\t\tclickCallback={() =>\r\n\t\t\t\t\t\t\tsetEnableDueDate((prev) => {\r\n\t\t\t\t\t\t\t\tsetFocusDue(!prev);\r\n\t\t\t\t\t\t\t\tif (enableStartDate) setFocusStart(prev);\r\n\t\t\t\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\t\t\t\tsetState([\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tstartDate: moment(startDate).toDate(),\r\n\t\t\t\t\t\t\t\t\t\t\tendDate: moment(startDate).toDate(),\r\n\t\t\t\t\t\t\t\t\t\t\tkey: 'selection',\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn !prev;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DateInput\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetFocusStart(false);\r\n\t\t\t\t\t\t\tsetFocusDue(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tfocus={focusDue}\r\n\t\t\t\t\t\treadOnly={!enableDueDate}\r\n\t\t\t\t\t\tvalue={enableDueDate ? dueDate : ''}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetDueDate(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\tsetFocusStart(false);\r\n\t\t\t\t\t\t\tsetFocusDue(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype={enableDueDate ? 'date' : 'text'}\r\n\t\t\t\t\t\tplaceholder='dd.mm.yyyy'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DateInput\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetFocusStart(false);\r\n\t\t\t\t\t\t\tsetFocusDue(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tfocus={focusDue}\r\n\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\tsetFocusStart(false);\r\n\t\t\t\t\t\t\tsetFocusDue(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\treadOnly={!enableDueDate}\r\n\t\t\t\t\t\tstyle={{ width: '23.5%' }}\r\n\t\t\t\t\t\tvalue={enableDueDate ? time : ''}\r\n\t\t\t\t\t\tonChange={(e) => setTime(e.target.value)}\r\n\t\t\t\t\t\ttype={enableDueDate ? 'time' : 'text'}\r\n\t\t\t\t\t\tplaceholder='hh:mm'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<SaveButton onClick={handleSaveClick}>Save</SaveButton>\r\n\t\t\t\t<Button clickCallback={handleRemoveClick} title='Remove' />\r\n\t\t\t</Wrapper>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default DatePopover;\r\n"]},"metadata":{},"sourceType":"module"}